html
	head
		title Flownote
		script(type='text/javascript', src='/frex')
		script(type='text/javascript', src='/js/index.js')
		script(type='text/javascript', src='/js/polymer.min.js')
		script(type='text/javascript', src='/js/jquery-1.10.2.min.js')
		link(href='/css/default.css', media='all', rel='stylesheet', type='text/css')
		link(rel='import', href='/polymer/polymer-ui-elements/polymer-ui-menu/polymer-ui-menu.html')
		link(rel='import', href='/polymer/polymer-ui-elements/polymer-ui-menu-item/polymer-ui-menu-item.html')
		link(rel='import', href='/polymer/polymer-ui-elements/polymer-ui-submenu-item/polymer-ui-submenu-item.html')

	body
		polymer-element(name='flownote-flow-item', extends='polymer-ui-submenu-item')
			template
				style
					.hide {
						display: none;
					}

					input {
						height: 40px;
						padding: 0px 10px;
						border: 1px solid transparent;
						border-radius: 3px;
					}

				div#labelItem
					polymer-ui-menu-item(icon='{{icon}}', label='{{label}}', active?='{{active}}', on-click='setFocus', on-keyup='keyup')

				input#labelInput.hide(value='{{label}}')
			script
				Polymer('flownote-flow-item', {
					icon: null,
					label: null,
					active: null,
					ready: function() {
						var self = this;
						self.$.labelInput.addEventListener('blur', function(e) {
							self.$.labelItem.className = '';
							self.$.labelInput.className = 'hide';
						});
					},
					labelChanged: function() {
						
					},
					setFocus: function() {
						if ($(this).hasClass('polymer-selected')) {
							this.$.labelItem.className = 'hide';
							this.$.labelInput.className = '';
							this.$.labelInput.select();
							this.$.labelInput.focus();
						}
					},
					keyup: function(e) {
						console.log(e);
					}
				});


		polymer-ui-menu(theme='polymer-ui-dark-theme')
			polymer-ui-submenu-item(icon='tag', label='Subject', active)
				flownote-flow-item(icon='settings', label='TEST')
				flownote-flow-item(icon='settings', label='TEST')
				flownote-flow-item(icon='settings', label='TEST')
				flownote-flow-item(icon='settings', label='TEST')
				flownote-flow-item(icon='settings', label='TEST')
				flownote-flow-item(icon='settings', label='TEST')
				flownote-flow-item(icon='settings', label='TEST')
